{"ast":null,"code":"const defaultState = {\n  city: '',\n  restaurants: [],\n  likes: [],\n  //likes will store list of res_id restaurant ids\n  error: '',\n  loader: true\n};\nexport const restaurantReducer = (state = defaultState, action) => {\n  switch (action.type) {\n    case 'RESET_STATE':\n      return defaultState;\n\n    case 'SET_CITY':\n      // console.log(\"CITY \"+action.city)\n      return { ...state,\n        city: action.city\n      };\n\n    case 'FETCH_RESTAURANTS':\n      return { ...state,\n        restaurants: action.restaurant,\n        loader: action.loader\n      };\n\n    case 'SET_LIKE':\n      let likesArr = [];\n\n      if (!action.like) {\n        //not present --at the time of page load\n        likesArr = JSON.parse(localStorage.getItem('likes'));\n      } else {\n        if (state.likes) {\n          likesArr = [...state.likes, action.like];\n        } else {\n          likesArr = [action.like];\n        }\n\n        localStorage.setItem('likes', JSON.stringify(likesArr));\n      }\n\n      return { ...state,\n        likes: likesArr\n      };\n\n    case 'UNSET_LIKE':\n      const likesUpdated = state.likes.filter(like => {\n        return like !== action.like;\n      });\n      localStorage.setItem('likes', JSON.stringify(likesUpdated));\n      return { ...state,\n        likes: likesUpdated\n      };\n\n    case 'SET_ERROR':\n      return { ...state,\n        error: action.error\n      };\n\n    default:\n      // console.log(\"CITY \"+action.city)\n      return state;\n  }\n};","map":{"version":3,"sources":["/home/spatidar/Desktop/React_projects/restaurant/src/reducers/restaurant.js"],"names":["defaultState","city","restaurants","likes","error","loader","restaurantReducer","state","action","type","restaurant","likesArr","like","JSON","parse","localStorage","getItem","setItem","stringify","likesUpdated","filter"],"mappings":"AAAA,MAAMA,YAAY,GAAC;AACfC,EAAAA,IAAI,EAAC,EADU;AAEfC,EAAAA,WAAW,EAAC,EAFG;AAGfC,EAAAA,KAAK,EAAE,EAHQ;AAGL;AACVC,EAAAA,KAAK,EAAE,EAJQ;AAKfC,EAAAA,MAAM,EAAC;AALQ,CAAnB;AAQA,OAAO,MAAMC,iBAAiB,GAAG,CAACC,KAAK,GAAGP,YAAT,EAAuBQ,MAAvB,KAAiC;AAE9D,UAAOA,MAAM,CAACC,IAAd;AACI,SAAK,aAAL;AACI,aAAOT,YAAP;;AAEJ,SAAK,UAAL;AACI;AACE,aAAO,EACL,GAAGO,KADE;AAELN,QAAAA,IAAI,EAAEO,MAAM,CAACP;AAFR,OAAP;;AAKN,SAAK,mBAAL;AACI,aAAO,EACH,GAAGM,KADA;AAEHL,QAAAA,WAAW,EAAGM,MAAM,CAACE,UAFlB;AAGHL,QAAAA,MAAM,EAACG,MAAM,CAACH;AAHX,OAAP;;AAMJ,SAAK,UAAL;AACI,UAAIM,QAAQ,GAAC,EAAb;;AACA,UAAG,CAACH,MAAM,CAACI,IAAX,EAAgB;AAAC;AACbD,QAAAA,QAAQ,GAAEE,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAX,CAAV;AACH,OAFD,MAGI;AACA,YAAGT,KAAK,CAACJ,KAAT,EAAe;AACXQ,UAAAA,QAAQ,GAAC,CAAC,GAAGJ,KAAK,CAACJ,KAAV,EAAiBK,MAAM,CAACI,IAAxB,CAAT;AACH,SAFD,MAGI;AACAD,UAAAA,QAAQ,GAAC,CAAEH,MAAM,CAACI,IAAT,CAAT;AACH;;AACDG,QAAAA,YAAY,CAACE,OAAb,CAAqB,OAArB,EAA8BJ,IAAI,CAACK,SAAL,CAAeP,QAAf,CAA9B;AACH;;AACD,aAAO,EACH,GAAGJ,KADA;AAEHJ,QAAAA,KAAK,EAAEQ;AAFJ,OAAP;;AAMJ,SAAK,YAAL;AACI,YAAMQ,YAAY,GAAGZ,KAAK,CAACJ,KAAN,CAAYiB,MAAZ,CAAoBR,IAAD,IAAS;AACzB,eAAOA,IAAI,KAAGJ,MAAM,CAACI,IAArB;AACH,OAFA,CAArB;AAIAG,MAAAA,YAAY,CAACE,OAAb,CAAqB,OAArB,EAA6BJ,IAAI,CAACK,SAAL,CAAeC,YAAf,CAA7B;AAEA,aAAO,EACH,GAAGZ,KADA;AAEHJ,QAAAA,KAAK,EAAEgB;AAFJ,OAAP;;AAKJ,SAAK,WAAL;AACI,aAAO,EACH,GAAGZ,KADA;AAEHH,QAAAA,KAAK,EAAEI,MAAM,CAACJ;AAFX,OAAP;;AAKJ;AACI;AACA,aAAOG,KAAP;AA1DR;AA4DH,CA9DM","sourcesContent":["const defaultState={\n    city:'', \n    restaurants:[],\n    likes: [],//likes will store list of res_id restaurant ids\n    error: '',\n    loader:true\n};\n\nexport const restaurantReducer = (state = defaultState, action) =>{\n    \n    switch(action.type){\n        case 'RESET_STATE':\n            return defaultState;\n\n        case 'SET_CITY':\n            // console.log(\"CITY \"+action.city)\n              return {\n                ...state,\n                city: action.city\n                \n            }\n        case 'FETCH_RESTAURANTS':\n            return {\n                ...state,\n                restaurants:  action.restaurant,\n                loader:action.loader \n            }\n\n        case 'SET_LIKE':\n            let likesArr=[];\n            if(!action.like){//not present --at the time of page load\n                likesArr= JSON.parse(localStorage.getItem('likes'));\n            }\n            else{\n                if(state.likes){\n                    likesArr=[...state.likes, action.like];\n                }\n                else{\n                    likesArr=[ action.like];\n                }\n                localStorage.setItem('likes', JSON.stringify(likesArr));\n            }\n            return {\n                ...state,\n                likes: likesArr\n            }\n            \n        \n        case 'UNSET_LIKE':\n            const likesUpdated = state.likes.filter((like) =>{\n                                    return like!==action.like;\n                                });\n\n            localStorage.setItem('likes',JSON.stringify(likesUpdated))\n\n            return {\n                ...state,\n                likes: likesUpdated\n            }\n\n        case 'SET_ERROR':\n            return {\n                ...state,\n                error: action.error\n            }\n\n        default:\n            // console.log(\"CITY \"+action.city)\n            return state;\n    }\n}"]},"metadata":{},"sourceType":"module"}