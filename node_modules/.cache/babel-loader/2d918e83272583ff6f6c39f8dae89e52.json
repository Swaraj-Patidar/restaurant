{"ast":null,"code":"import { setError } from \"./error\";\n\nfunction handleErrors(response) {\n  if (!response.ok) {\n    throw Error(response.statusText);\n  }\n\n  return response;\n}\n\nexport const fetchRestaurants = restaurant => ({\n  type: 'FETCH_RESTAURANTS',\n  restaurant\n});\nexport const thunkRestaurants = (city = '', start = 1) => {\n  return (dispatch, getState) => {// fetch(`https://developers.zomato.com/api/v2.1/cities?q=${city}&apikey=${API_KEY}`)\n    // .then(handleErrors)\n    // .then(res => res.json())\n    // .then((data) =>{\n    //     const cityId = data.location_suggestions[0].id;\n    //     return fetch(`https://developers.zomato.com/api/v2.1/search?entity_id=${cityId}&entity_type=city&start=${start}&count=5&sort=rating&order=desc&apikey=${API_KEY}`)\n    //     .then(handleErrors)\n    //     .then(res => res.json() )\n    //     .then((data) => {\n    //         console.log(data.restaurants);\n    //         data.restaurants.forEach((restaurant) =>{\n    //             const res_id = restaurant.restaurant.id;\n    //             fetch(`https://developers.zomato.com/api/v2.1/reviews?res_id=${res_id}&apikey=${API_KEY}`)\n    //             .then(handleErrors)\n    //             .then(res => res.json())\n    //             .then((review) =>{\n    //                 //reviews\n    //                 const restaurantObj = {\n    //                     ...restaurant,\n    //                     review: review\n    //                 }\n    //                 dispatch(fetchRestaurants(restaurantObj));\n    //             })\n    //             .catch((error)=>{\n    //                 dispatch(setError('problem in accessing reviews through API. '+error));\n    //             })\n    //         })\n    //     })\n    //     .catch((error)=>{\n    //         dispatch(setError('problem in accessing restaurant list through API. '+error));\n    //     })\n    // })\n    // .catch((error)=>{\n    //     console.log(error);\n    //     dispatch(setError('problem in accessing API initially.'+ error));//check your API key and limit of Basic API hits\n    // })\n    // console.log(\"City \"+city);\n  };\n};","map":{"version":3,"sources":["/home/spatidar/Desktop/React_projects/restaurant/src/actions/restaurant.js"],"names":["setError","handleErrors","response","ok","Error","statusText","fetchRestaurants","restaurant","type","thunkRestaurants","city","start","dispatch","getState"],"mappings":"AAAA,SAASA,QAAT,QAAyB,SAAzB;;AAGA,SAASC,YAAT,CAAsBC,QAAtB,EAAgC;AAC5B,MAAI,CAACA,QAAQ,CAACC,EAAd,EAAkB;AACd,UAAMC,KAAK,CAACF,QAAQ,CAACG,UAAV,CAAX;AACH;;AACD,SAAOH,QAAP;AACH;;AAED,OAAO,MAAMI,gBAAgB,GAAEC,UAAD,KAAgB;AAC1CC,EAAAA,IAAI,EAAE,mBADoC;AAE1CD,EAAAA;AAF0C,CAAhB,CAAvB;AAKP,OAAO,MAAME,gBAAgB,GAAE,CAACC,IAAI,GAAC,EAAN,EAAUC,KAAK,GAAC,CAAhB,KAAqB;AAChD,SAAO,CAACC,QAAD,EAAWC,QAAX,KAAuB,CAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACH,GAvCD;AAyCH,CA1CM","sourcesContent":["import { setError } from \"./error\";\n\n\nfunction handleErrors(response) {\n    if (!response.ok) {\n        throw Error(response.statusText);\n    }\n    return response;\n}\n\nexport const fetchRestaurants=(restaurant) =>({\n    type: 'FETCH_RESTAURANTS',\n    restaurant\n})\n\nexport const thunkRestaurants =(city='', start=1) =>{\n    return (dispatch, getState) =>{\n        // fetch(`https://developers.zomato.com/api/v2.1/cities?q=${city}&apikey=${API_KEY}`)\n        // .then(handleErrors)\n        // .then(res => res.json())\n        // .then((data) =>{\n        //     const cityId = data.location_suggestions[0].id;\n        //     return fetch(`https://developers.zomato.com/api/v2.1/search?entity_id=${cityId}&entity_type=city&start=${start}&count=5&sort=rating&order=desc&apikey=${API_KEY}`)\n        //     .then(handleErrors)\n        //     .then(res => res.json() )\n        //     .then((data) => {\n        //         console.log(data.restaurants);\n        //         data.restaurants.forEach((restaurant) =>{\n        //             const res_id = restaurant.restaurant.id;\n        //             fetch(`https://developers.zomato.com/api/v2.1/reviews?res_id=${res_id}&apikey=${API_KEY}`)\n        //             .then(handleErrors)\n        //             .then(res => res.json())\n        //             .then((review) =>{\n        //                 //reviews\n        //                 const restaurantObj = {\n        //                     ...restaurant,\n        //                     review: review\n        //                 }\n        //                 dispatch(fetchRestaurants(restaurantObj));\n        //             })\n        //             .catch((error)=>{\n        //                 dispatch(setError('problem in accessing reviews through API. '+error));\n        //             })\n        //         })\n\n        //     })\n        //     .catch((error)=>{\n        //         dispatch(setError('problem in accessing restaurant list through API. '+error));\n        //     })\n        // })\n        // .catch((error)=>{\n        //     console.log(error);\n        //     dispatch(setError('problem in accessing API initially.'+ error));//check your API key and limit of Basic API hits\n        // })\n        // console.log(\"City \"+city);\n    }\n\n}"]},"metadata":{},"sourceType":"module"}